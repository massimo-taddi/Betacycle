<p-toast/>
<div class="container" style="padding-top: 100px;">
    <div class="row border rounded pb-2">
        <div class="col-md-8">
            <h2>Shopping Basket</h2>
            <p>Your items:</p>
            <table class="table">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Quantity</th>
                        <th>Total</th>
                        <th></th> <!-- Add a new column for the delete button -->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of basketItemsProductsMap | keyvalue">
                        <td><img style="width: 100px;" src="data:image/gif;base64, {{item.value.largePhoto}}" alt="..."></td>
                        <td>{{ item.value.name }}</td>
                        <td>
                            <p-dropdown [(ngModel)]="item.key.quantity" [options]="rangeArray" (onChange)="updateQuantity(item.key)"></p-dropdown>
                        </td>
                        <td>${{ (item.key.quantity * item.value.listPrice) | number: '1.0-2' }}</td>
                        <td>
                            <button pButton type="button" class="btn btn-danger pi pi-trash" (click)="deleteItem(item.key)"></button>
                        </td> <!-- Add the delete button with the pi p-delete icon -->
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-4">
            <h2>Order Summary</h2>
            <p>Total items: {{ basketItemsProductsMap.size }}</p>
            <p>Total price: ${{ calculateTotalPrice() | number: '1.0-2' }}</p>
            <button id="checkoutBtn" [disabled]="false" pButton type="button" (click)="CheckoutRoute()" label="Checkout" class="btn btn-primary">Checkout</button>
            <div *ngIf="noItemsWarning" style="color: red">Your basket is empty</div>
        </div>
    </div>
    <p-dialog header="Please, log-in" [modal]="true" blockScroll="true" draggable="false" [(visible)]="templateCheckout" [style]="{ width: '40rem' }" 
              [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
              <h6>You're not logged in, please do it before continue</h6>
              <div class="d-flex justify-content-evenly">
                <button type="button" (click)="templateCheckout = false;" style="padding: 10px;" class="btn btn-outline-secondary">Cancel</button>
                <button type="button" routerLink="/login" style="padding: 10px;" class="btn btn-primary">Login</button>
              </div>
    </p-dialog>
</div>